# Spring
 - 자바 스프링(Spring)은 자바 기반의 오픈 소스 애플리케이션 프레임워크로, 엔터프라이즈 애플리케이션을 개발하기 위한 다양한 기능과 도구를 제공하는 프레임워크입니다.
 - 스프링은 애플리케이션의 구성, 보안, 데이터 액세스, 웹 개발 등 다양한 영역에서 개발자들이 효율적으로 작업할 수 있도록 도와줍니다.

### 프레임워크와 라이브러리의 차이
 - 프레임워크는 개발자가 프레임워크의 규칙과 구조를 따라가며 개발하는 방식으로, 프레임워크가 개발자의 코드 흐름을 제어합니다.
   
    (안 따라하면 안 됨)
 - 라이브러리는 개발자가 필요한 기능을 호출하여 사용하는 방식으로, 개발자가 코드를 제어하며 라이브러리의 기능을 활용합니다.
   
   ( 필요할때 쓰 는 것)


--------------------------------------------------------------------------------------------------------------------------------------------------------------------

### 스프링의 주요 특징

  - 의존성 주입(Dependency Injection): 스프링은 의존성 주입을 통해 컴포넌트들 간의 결합도를 낮추는데 중점을 둡니다. 이를 통해 유연하고 관리하기 쉬운 코드를 작성할 수 있습니다.

--------------------------------------------------------------------------------------------------------------------------------------------------------------------

  - AOP(Aspect-Oriented Programming): 관점 지향 프로그래밍.
    * 객체지향 프로그래밍 (OOP)의 보완적인 프로그래밍 기법.
    * 관심사의 분리를 지원하는 AOP 개념을 스프링은 강력하게 지원함.
    * 이를 통해 코드의 횡단 관심사(예: 로깅, 보안 등)를 모듈화하고 중복을 줄일 수 있음. 

 - 주요 특징
    * 횡단 관심사 (Cross-Cutting Concerns) 처리: 애플리케이션의 여러 부분에서 반복적으로 발생하는 관심사(로깅, 보안, 트랜잭션 관리 등)를 분리하고 중앙에서 관리합니다. 이로써 코드 중복을 줄이고 유지 보수성을 향 
      상시킵니다.
    * 모듈성 향상: AOP를 사용하면 애플리케이션의 주요 로직과 관심사를 분리하여 모듈성을 향상시킬 수 있습니다. 이는 코드를 더 쉽게 이해하고 유지 보수하는 데 도움이 됩니다.
    * 재사용성: 관심사를 별도의 모듈로 캡슐화하면 다른 프로젝트나 애플리케이션에서 재사용하기 쉽습니다.
      
    *  주요 개념 : "Aspect"
    *  Aspect는 어플리케이션의 여러 부분에서 반복되는 관심사를 캡슐화하고 이를 필요한 시점에 적용할 수 있도록 합니다.
    *  AOP는 다양한 언어와 프레임워크에서 지원되며, Java의 Spring 프레임워크나 .NET의 AspectJ와 같은 라이브러리와 도구를 통해 사용할 수 있습니다.
    
 --------------------------------------------------------------------------------------------------------------------------------------------------------------------     
 
  -  MVC 아키텍처: 스프링은 웹 애플리케이션 개발을 위한 MVC(Model-View-Controller) 아키텍처를 지원합니다. 이를 통해 애플리케이션의 구성 요소들을 분리하여 관리하고 유지보수하기 쉽게 만듭니다.
    
     * MVC 패턴: 개발의 규모가 커짐에 따라 구성요소,로직들을 분리시켜 코드 해석과 유지보수를 용이하게 하게 위해 만든 프로그래밍 기법
     * Model: 데이터를 위한 로직들을 모은 곳
     * View: 사용자에게 보여지는 페이지, 공통으로 적용되는 사항이 표시되야함
     * Controller: Model과 View를 연결해주는 매개체 역할을 하는 로직을 구현하는 곳
   
     * MVC 패턴을 지킬 때 필요한 필수요소
      * ###### 1.Model은 Controller와 View에 의존하지 않아야함.
        
        (Model 내부에 Controller와 View에 관련된 코드가 있으면 안 됨.)
      * ###### 2.View는 Model에만 의존해야 하고, Controler에는 의존하면 안 됨.
      
        (View 내부에 Model 코드만 있을 수 있고, Controller의 코드가 있으면 안 됨.)
      * ###### 3.View가 Model로부터 데이터를 받을 때는, 사용자마다 다르게 보여주어야 하는 데이터에 대해서만 받아야 함.
      * ###### 4.Controller는 Model과 View에 의존해도 됨.
      
        (Controller 내부에는 Model과 View의 코드가 있을 수 있음.)
      * 5.View가 Model로부터 데이터를 받을 때, 반드시 Controller에서 받아야함.


--------------------------------------------------------------------------------------------------------------------------------------------------------------------

  - 데이터 액세스 추상화: 스프링은 다양한 데이터베이스 기술과의 통합을 간소화하며, JDBC(Java Database Connectivity)를 편리하게 사용할 수 있는 방법을 제공합니다.

  -  보안: 스프링은 보안 기능을 포함하고 있어 인증과 권한 부여를 쉽게 구현할 수 있습니다.


--------------------------------------------------------------------------------------------------------------------------------------------------------------------
  - 트랜잭션 관리: 스프링은 선언적인 방식으로 트랜잭션 관리를 할 수 있게 해줍니다. 이를 통해 데이터베이스 작업의 일관성과 안정성을 유지할 수 있습니다.
 
      - 트랜잭션(Transaction): DB와 같은 영구 저장소에서 수행되는 하나 이상의 작업단위.
      - 작업 단위는 하나의 논리적인 단위로 간주되며, 모두 성공적으로 완료되거나 모두 롤백되는 것을 보장하는 논리적인 작업의 단위입니다.
      - 트랜잭션은 데이터의 일관성과 무결성을 보장하기 위해 사용됩니다.
        
      - 원칙(ACID): 카드로 계좌 이체하는 과정을 생각하면 됨.
        - 원자성 (Atomicity): 트랜잭션은 모든 작업이 하나의 원자적인 작업 단위로 간주되어, 모든 작업이 성공적으로 완료되거나 전혀 수행되지 않은 것처럼 동작합니다. 하나의 작업이 실패하면 전체 트랜잭션은 롤백되어 이전 상태로 복구됩니다.
     
        - 일관성 (Consistency): 트랜잭션 전후에 데이터베이스는 일관된 상태를 유지해야 합니다. 즉, 트랜잭션이 시작되기 전과 끝난 후에도 데이터베이스의 제약 조건을 만족해야 합니다.
          
        - 격리성 (Isolation): 병렬로 실행되는 여러 트랜잭션은 서로 영향을 주지 않고 독립적으로 실행되는 것처럼 보여야 합니다. 한 트랜잭션이 다른 트랜잭션의 실행 결과를 볼 수 없습니다.
          
        - 지속성 (Durability): 트랜잭션이 성공적으로 완료되면 그 결과는 영구적으로 저장되어야 합니다. 시스템 장애가 발생하더라도 데이터의 변경은 유지되어야 합니다.
          
--------------------------------------------------------------------------------------------------------------------------------------------------------------------

  - 테스트 지원: 스프링은 단위 테스트와 통합 테스트를 지원하며, 모듈화된 구조 덕분에 테스트하기 용이한 코드를 작성할 수 있습니다. 

  - 다양한 모듈 제공: 스프링은 다양한 모듈로 구성되어 있어 필요한 기능만 선택적으로 사용할 수 있습니다. 예를 들어, 스프링 부트(Spring Boot)는 스프링 애플리케이션의 초기 설정을 간소화하고 개발 생산성을 높이는 도구입니다.

  - 스프링은 높은 유연성과 확장성을 제공하며, 엔터프라이즈급 애플리케이션부터 작은 웹 애플리케이션까지 다양한 종류의 프로젝트에서 사용됩니다.
    
 ---------------------------------------------------------------------------------------------------------------------------------------------------------------------
 
# 스프링(Spring) 컨테이너
 
 스프링 프레임워크에서 핵심적인 역할을 수행하는 *컴포넌트로,
 
 스프링 기반 애플리케이션의 런타임 환경을 제공하며 객체의 생명주기와 의존성 관리를 관리합니다. 
 
 스프링 컨테이너는 애플리케이션의 개발과 배포를 좀 더 효율적으로 관리할 수 있도록 돕는 중요한 요소 중 하나입니다.

  ## 주요 역할 & 기능

 - 객체 생성과 관리:
   - 스프링 컨테이너는 애플리케이션에서 사용되는 객체들을 생성하고 관리합니다. 객체의 생성과 소멸 시점을 제어하며, 필요한 시점에 객체를 재사용합니다.
  
 - 의존성 주입(Dependency Injection):
   - 스프링은 의존성 주입(DI)이라는 디자인 패턴을 활용하여 객체들 간의 의존성을 관리합니다. 이를 통해 객체가 직접 의존하는 객체를 생성하지 않고 외부에서 주입받아 사용합니다. 이는 코드의 유연성과 테스트 용이성을 높여줍니다.
  
 - 인스턴스화와 설정:
   - 스프링 컨테이너는 애플리케이션의 설정 정보(XML, 어노테이션 등)를 기반으로 빈(Bean) 객체를 생성하고 설정합니다. 이를 통해 객체 생성과 초기화 과정을 효율적으로 수행할 수 있습니다.
  
 - 싱글톤 관리:
   - 스프링 컨테이너는 빈 객체를 싱글톤으로 관리할 수 있습니다. 따라서 동일한 빈을 여러 번 생성하지 않고 하나의 인스턴스를 재사용함으로써 메모리 사용량을 줄이고 성능을 개선할 수 있습니다.
  
 - AOP(Aspect-Oriented Programming) 지원:
   - 스프링 컨테이너는 AOP를 활용하여 애플리케이션의 횡단 관심사(Cross-cutting Concerns)를 분리하여 관리할 수 있습니다.

스프링 프레임워크에는 여러 가지 종류의 컨테이너가 있으며, 그 중에서 가장 일반적으로 사용되는 두 가지는 "BeanFactory"와 "ApplicationContext"입니다. ApplicationContext는 BeanFactory를 확장한 형태로, 더 다양한 기능과 유용한 기능들을 제공합니다. 스프링 컨테이너를 이용하여 객체의 생명주기와 의존성 관리를 효율적으로 관리할 수 있으며, 개발자가 핵심 비즈니스 로직에 집중할 수 있도록 도와줍니다

## 컴포넌트

 - 컴포넌트(Component): 애플리케이션을 구성하는 부분을 나타내는 개념.
 
 스프링은 애플리케이션을 구성하는 여러 컴포넌트들을 관리하고 연결하는데 사용됩니다.
 
 컴포넌트는 크게 다음과 같은 의미로 사용됨

 ---------------------------------------------------------------------------------------------------------------------------------------------------------------------
 


 - 스프링 컴포넌트 스캔(Component Scan)
   - 스프링은 컴포넌트 스캔을 통해 클래스들을 검색하고 인식하며, 이를 빈(Bean)으로 등록합니다.
     
     컴포넌트 스캔은 @Component 어노테이션이나 그와 유사한 어노테이션(@Service, @Repository, @Controller 등)을 사용하여 클래스를 스프링의 관리 대상으로 지정하는 것을 의미합니다.
   
 - 컴포넌트 스캔을 통한 빈 등록
   - 컴포넌트 스캔을 통해 등록된 클래스들은 스프링 컨테이너에 빈으로 등록되어 관리됩니다.
     
     이렇게 등록된 빈들은 스프링의 의존성 주입(Dependency Injection)을 통해 필요한 곳에서 사용될 수 있습니다.
  
- 컴포넌트 기반 아키텍처
  - 스프링은 컴포넌트 기반 아키텍처를 촉진하며, 이를 통해 애플리케이션의 각 부분을 재사용 가능하고 유지보수가 용이한 모듈로 분리할 수 있습니다.
    
     컴포넌트는 애플리케이션을 논리적으로 구성하는 단위로 사용됩니다.
    
     간단한 예시로, 스프링에서의 컴포넌트는 다음과 같이 사용될 수 있습니다:

```java
Copy code
import org.springframework.stereotype.Component;

@Component
public class UserService {
    // UserService 클래스는 스프링의 컴포넌트로 등록됨
    // 다른 클래스에서 이 빈을 주입하여 사용할 수 있음
}

```

이와 같이 @Component 어노테이션을 사용하여 클래스를 스프링의 컴포넌트로 등록할 수 있습니다. 이후에 등록된 컴포넌트는 스프링 컨테이너에서 관리되며, 필요한 곳에서 사용될 수 있게 됩니다.


 ## 빈(Bean)

 "빈(Bean)"은 스프링 컨테이너에 등록되어 관리되는 객체를 의미합니다.
 
 빈은 스프링의 의존성 주입(Dependency Injection) 기능을 활용하여 객체 간의 관계를 설정하고, 애플리케이션의 다양한 부분에서 재사용될 수 있도록 합니다.

 - 주요 특징

   -  객체의 생성과 관리: 빈은 스프링 컨테이너에 의해 생성되고 관리됩니다. 이를 통해 객체의 생명주기와 라이프사이클 관리를 스프링이 담당합니다.
     
   -  의존성 주입(DI): 빈은 의존성 주입을 통해 다른 빈과의 관계를 설정합니다. 이로써 객체 간의 결합도를 낮추고 유연하고 확장 가능한 애플리케이션을 구축할 수 있습니다.
     
   -  스프링 컨테이너에 등록: 빈은 @Component 어노테이션을 비롯한 다양한 어노테이션을 사용하여 스프링 컨테이너에 등록됩니다.
     
   -  싱글톤 기본 설정: 스프링의 기본 빈 스코프는 싱글톤(Singleton)입니다. 따라서 스프링 컨테이너 내에서 동일한 빈은 하나의 인스턴스만 생성되고 공유됩니다.
     
   -  다양한 기능 제공: 빈은 스프링의 다양한 기능을 활용할 수 있는 대상입니다. 예를 들어 AOP(관점 지향 프로그래밍), 트랜잭션 관리 등을 적용할 수 있습니다.
 

 ## 어노테이션(Annotation)

 
어노테이션은 자바의 메타데이터를 나타내는 것으로, 클래스, 메소드, 필드 등의 요소에 부가적인 정보를 제공합니다. 

이 정보는 컴파일러나 프레임워크 등에 의해 활용되며, 실행 시에도 확인할 수 있습니다. 

스프링에서 어노테이션은 주로 애플리케이션의 구성과 동작을 설정하는 데 사용됩니다.

-  주요 어노테이션

   - @Component
     -  클래스를 스프링의 빈(Bean)으로 등록합니다.

--------------------------------------------------------------------------------

  - @Component 어노테이션을  MVC 패턴에 각각 기능별로 세분화 하여 구분한것
 
    - @Controller, @Service, @Repository
      
    - 각각 웹 애플리케이션의 컨트롤러, 서비스, 레포지토리 계층을 나타냅니다.
   
       이러한 어노테이션을 사용하여 클래스를 빈으로 등록하고, 역할에 맞게 구분할 수 있습니다.
     
--------------------------------------------------------------------------------    

   - @RequestMapping
     - 컨트롤러의 메소드에 사용되며, 요청 URL과 메소드를 매핑하여 해당 요청이 들어왔을 때 실행될 메소드를 지정합니다.
    
   - @Configuration
     -  스프링 설정 클래스를 나타내며, 빈의 생성 및 설정을 담당하는 메소드들을 정의합니다.
    
   - @Value
    -  프로퍼티 값을 주입받을 때 사용되며, 주로 외부 설정 파일에서 값을 가져와서 사용합니다.
    
--------------------------------------------------------------------------------
    
   - @Autowired
      - @Autowired 어노테이션은 주입할 빈을 자동으로 찾아서 해당 타입의 빈을 주입합니다.
        
     - 만약 같은 타입의 빈이 여러 개 존재하는 경우, 스프링은 자동으로 해당 타입의 빈을 찾아서 주입하려고 시도합니다.
       
     -  @Autowired는 주로 타입에 기반한 의존성 주입에 사용됩니다.
       
   - @Qualifier
     - @Qualifier 어노테이션은 @Autowired와 함께 사용되며, 여러 빈 중에서 특정한 빈을 선택하여 주입할 때 사용됩니다.
     
     - @Qualifier 어노테이션을 사용할 때는 빈의 이름(또는 Qualifier로 지정한 이름)을 명시하여 어떤 빈을 주입할지 지정해야 합니다.
     
     -  @Qualifier는 주로 같은 타입의 여러 빈 중에서 특정한 빈을 선택하는 경우에 사용됩니다.

       ex)
     
     ``` java
     
          @Service
          public class MyService {
              private final MyRepository myRepository;
          
              @Autowired
              @Qualifier("myRepositoryImpl") // 여기서 "myRepositoryImpl"은 빈의 이름
              public MyService(MyRepository myRepository) {
                  this.myRepository = myRepository;
              }
          }
     ```
 
- 둘의 차이점
  
  @Autowired는 주입할 빈을 타입을 기반으로 자동으로 선택하고,
   
  @Qualifier는 같은 타입의 빈 중에서 특정한 빈을 선택할 때 사용됩니다. 두 어노테이션을 조합하여 원하는 의존성을 주입할 수 있습니다.
 
--------------------------------------------------------------------------------


   
    
   - @Transactional
     - 트랜잭션 관리를 설정할 때 사용되며, 해당 메소드가 트랜잭션 경계 내에서 실행되도록 합니다.
    
--------------------------------------------------------------------------------

## 스프링 프레임워크의 작동 순서

- 1. 스프링 컨테이너의 초기화

스프링 애플리케이션은 보통 웹 애플리케이션의 경우 웹 애플리케이션 컨텍스트(Web Application Context)를 구성하는 것으로 시작합니다. 

스프링의 ContextLoaderListener나 DispatcherServlet과 같은 서블릿을 웹 애플리케이션의 web.xml 파일에 등록하여 웹 애플리케이션 컨텍스트를 초기화합니다.

- 2. Bean 정의와 설정 로딩

스프링 컨테이너는 XML 파일, 자바 어노테이션 또는 자바 코드를 사용하여 애플리케이션의 구성 요소를 정의하고 설정합니다. 이러한 설정 파일을 로딩하고 빈(Bean) 객체를 생성하며, 빈들 간의 의존성을 해결합니다.

- 3. 빈 라이프사이클 관리

스프링은 빈의 라이프사이클을 관리하며, 빈의 초기화와 소멸 단계에서 콜백 메서드를 호출할 수 있도록 지원합니다.

- 4. 요청 처리 및 컨트롤러 호출

클라이언트(브라우저 또는 다른 시스템)로부터 HTTP 요청이 들어오면, 스프링의 DispatcherServlet이 요청을 받습니다. 

이 서블릿은 핸들러 매핑을 통해 어떤 컨트롤러(Controller)를 실행할 것인지 결정하고, 해당 컨트롤러를 호출합니다.

- 5. 컨트롤러의 실행

컨트롤러(Controller)는 요청을 처리하고, 비즈니스 로직을 수행하며, 데이터를 가공합니다. 컨트롤러가 실행되면서 필요한 서비스 빈(Service)이나 데이터 액세스 빈(DAO) 등을 활용할 수 있습니다.

- 6. 모델과 뷰 설정

컨트롤러가 처리한 결과 데이터는 모델(Model)에 저장됩니다.

그런 다음, 뷰(View)가 모델을 기반으로 사용자에게 보여줄 응답을 생성합니다.

- 7. 응답 전송

뷰가 생성한 응답은 클라이언트에게 전송되어 화면에 표시됩니다.

이때, HTTP 응답 헤더와 본문이 포함되며, 클라이언트 브라우저에 표시됩니다.

- 8.빈의 소멸

애플리케이션이 종료될 때, 스프링 컨테이너는 빈의 소멸 단계를 관리하고, 빈의 소멸 콜백 메서드를 호출합니다.
